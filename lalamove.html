<script>
    // ฟังก์ชันดึงค่าจาก URL (Query Parameters)
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // ฟังก์ชันรันอัตโนมัติเมื่อเปิดหน้าเว็บ
    window.onload = function() {
        // 1. ดึงค่าจาก Link ที่ส่งมาจาก Line
        const lat = getQueryParam('lat');
        const lng = getQueryParam('lng');
        const addr = getQueryParam('addr');

        // 2. ถ้ามีข้อมูล ให้กรอกลงฟอร์มอัตโนมัติ
        if (lat && lng) {
            document.getElementById('destLat').value = lat;
            document.getElementById('destLng').value = lng;
            
            // ถ้ามีช่องให้กรอกที่อยู่ด้วย (สมมติว่าคุณเพิ่ม input id="destAddress" ใน html)
            if(addr && document.getElementById('destAddress')) {
                document.getElementById('destAddress').value = decodeURIComponent(addr); 
            }

            // 3. สั่งคำนวณราคาให้เลยทันที (Option)
            // checkPrice(); // เอา comment ออกถ้าอยากให้มันกดปุ่มคำนวณให้เองเลย
            
            // แจ้งเตือนว่าโหลดข้อมูลแล้ว
            // alert('✅ โหลดข้อมูลลูกค้าเรียบร้อย พร้อมเช็คราคา!');
            
            // (ลูกเล่นเสริม) เลื่อนหน้าจอลงมาที่ส่วนแสดงผล
             document.getElementById('checkBtn').scrollIntoView({ behavior: 'smooth' });
        }
    };
</script>

<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - ‡∏´‡∏ô‡∏∏‡πà‡∏°‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap');
        body { font-family: 'Prompt', sans-serif; background-color: #f3f4f6; }
        .input-group { margin-bottom: 1rem; }
        label { display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.25rem; }
        input, select, textarea { width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem; outline: none; transition: border-color 0.2s; }
        input:focus, select:focus, textarea:focus { border-color: #16a34a; ring: 2px; ring-color: #bbf7d0; }
    </style>
</head>
<body class="p-6">

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6">
        
        <div class="bg-white p-6 rounded-xl shadow-lg">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2"><i class="fa-solid fa-pen-to-square"></i> ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
            
            <div class="grid grid-cols-2 gap-4">
                <div class="input-group">
                    <label>ID ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏´‡πâ‡∏≤‡∏°‡∏ã‡πâ‡∏≥)</label>
                    <input type="number" id="p_id" placeholder="‡πÄ‡∏ä‡πà‡∏ô 1, 91">
                </div>
                <div class="input-group">
                    <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                    <select id="p_category">
                        <option value="recommend">Recommend (‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</option>
                        <option value="promotion">Promotion (‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô)</option>
                    </select>
                </div>
            </div>

            <div class="input-group">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π</label>
                <input type="text" id="p_name" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏õ‡∏±‡πà‡∏ô‡∏ô‡∏°‡∏™‡∏î">
            </div>

            <div class="input-group">
                <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô‡πÜ</label>
                <input type="text" id="p_desc" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏±‡∏ô ‡∏ô‡∏±‡∏ß‡∏™‡∏∏‡∏î‡πÜ">
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="input-group">
                    <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
                    <input type="number" id="p_price" placeholder="100">
                </div>
                <div class="input-group">
                    <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ï‡πá‡∏° (‡∏Ç‡∏µ‡∏î‡∏Ü‡πà‡∏≤) *‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ</label>
                    <input type="number" id="p_originalPrice" placeholder="120">
                </div>
            </div>

            <div class="input-group">
                <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label>
                <input type="text" id="p_img" placeholder="https://...">
                <p class="text-xs text-gray-400 mt-1">*‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Google Drive ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Direct Link ‡∏Å‡πà‡∏≠‡∏ô</p>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="input-group">
                    <label>‡∏õ‡πâ‡∏≤‡∏¢‡∏ï‡∏¥‡∏î‡∏°‡∏∏‡∏° (Badge) *‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ</label>
                    <input type="text" id="p_badge" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ, ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ üî•">
                </div>
                <div class="input-group">
                    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    <select id="p_stock">
                        <option value="true">‚úÖ ‡∏°‡∏µ‡∏Ç‡∏≠‡∏á (In Stock)</option>
                        <option value="false">‚ùå ‡∏´‡∏°‡∏î (Sold Out)</option>
                    </select>
                </div>
            </div>

            <div class="border-t pt-4 mt-2">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-gray-700 font-bold">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Options)</label>
                    <button type="button" onclick="addOptionGroup()" class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
                </div>
                <div id="options-container" class="space-y-3">
                    </div>
            </div>

            <button onclick="generateCode()" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg mt-6 hover:bg-green-700 transition shadow-md">
                <i class="fa-solid fa-code"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î
            </button>
        </div>

        <div class="flex flex-col gap-6">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-lg font-bold text-gray-800 mb-4">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î (Preview)</h2>
                <div class="border rounded-xl p-4 flex gap-4 relative max-w-sm mx-auto bg-white hover:shadow-sm transition">
                    <div class="relative shrink-0 w-24 h-24 bg-gray-100 rounded-xl overflow-hidden">
                        <img id="prev_img" src="https://via.placeholder.com/150" class="w-full h-full object-cover">
                        <span id="prev_badge" class="absolute top-0 left-0 bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-tl-xl rounded-br-lg hidden">Badge</span>
                    </div>
                    <div class="flex-1 flex flex-col justify-between py-1">
                        <div>
                            <h3 id="prev_name" class="font-bold text-gray-800 text-sm leading-tight mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...</h3>
                            <p id="prev_desc" class="text-xs text-gray-500 line-clamp-2">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢...</p>
                        </div>
                        <div class="flex items-end gap-2">
                            <span id="prev_origPrice" class="text-gray-300 text-xs line-through hidden">‡∏ø0</span>
                            <span id="prev_price" class="text-green-600 font-bold text-lg">‡∏ø0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex-1 flex flex-col">
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-lg font-bold text-white">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (Code)</h2>
                    <button onclick="copyCode()" class="text-xs bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-500">Copy</button>
                </div>
                <textarea id="output_code" class="w-full h-full bg-gray-900 text-green-400 font-mono text-sm p-4 rounded-lg border-none focus:ring-0" readonly></textarea>
                <p class="text-gray-400 text-xs mt-2">‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ menuDB ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå index.html</p>
            </div>
        </div>

    </div>

    <script>
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô, ‡∏ó‡πá‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á)
        function addOptionGroup() {
            const container = document.getElementById('options-container');
            const groupId = Date.now();
            
            const html = `
                <div class="bg-gray-50 p-3 rounded border border-gray-200 relative group" id="group-${groupId}">
                    <button onclick="this.parentElement.remove()" class="absolute top-2 right-2 text-red-400 hover:text-red-600"><i class="fa-solid fa-times"></i></button>
                    
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        <input type="text" class="opt-name text-sm" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô)">
                        <select class="opt-type text-sm">
                            <option value="radio">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ 1 (Radio)</option>
                            <option value="checkbox">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢ (Checkbox)</option>
                        </select>
                    </div>
                    
                    <div class="mb-2">
                         <input type="number" class="opt-max text-sm w-full" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡∏µ‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Checkbox)">
                    </div>

                    <div class="pl-4 border-l-2 border-gray-300 space-y-2 choices-container">
                        </div>
                    <button onclick="addChoice('${groupId}')" class="text-xs text-green-600 mt-2 font-medium">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡πà‡∏≠‡∏¢</button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡πà‡∏≠‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢, ‡∏•‡∏≠‡∏î‡∏ä‡πà‡∏≠‡∏á)
        function addChoice(groupId) {
            const group = document.getElementById(`group-${groupId}`);
            const container = group.querySelector('.choices-container');
            
            const html = `
                <div class="flex gap-2 items-center choice-item">
                    <input type="text" class="choice-label text-sm flex-1" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢)">
                    <input type="number" class="choice-price text-sm w-20" placeholder="+‡∏£‡∏≤‡∏Ñ‡∏≤" value="0">
                    <button onclick="this.parentElement.remove()" class="text-gray-400 hover:text-red-500"><i class="fa-solid fa-minus-circle"></i></button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å: ‡∏™‡∏£‡πâ‡∏≤‡∏á Code
        function generateCode() {
            // 1. ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏•‡∏±‡∏Å
            const id = document.getElementById('p_id').value;
            const category = document.getElementById('p_category').value;
            const name = document.getElementById('p_name').value;
            const desc = document.getElementById('p_desc').value;
            const price = document.getElementById('p_price').value;
            const originalPrice = document.getElementById('p_originalPrice').value;
            const img = document.getElementById('p_img').value;
            const badge = document.getElementById('p_badge').value;
            const stock = document.getElementById('p_stock').value === 'true';

            if(!id || !name || !price) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å ID, ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }

            // 2. ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ Options
            const options = [];
            document.querySelectorAll('#options-container > div').forEach(group => {
                const optName = group.querySelector('.opt-name').value;
                const optType = group.querySelector('.opt-type').value;
                const optMax = group.querySelector('.opt-max').value;
                
                if(optName) {
                    const choices = [];
                    group.querySelectorAll('.choice-item').forEach(choice => {
                        const label = choice.querySelector('.choice-label').value;
                        const cPrice = choice.querySelector('.choice-price').value;
                        if(label) {
                            choices.push({ label: label, price: parseInt(cPrice) || 0 });
                        }
                    });

                    const optObj = { type: optType, name: optName, choices: choices };
                    if(optType === 'checkbox' && optMax) optObj.max = parseInt(optMax);
                    
                    options.push(optObj);
                }
            });

            // 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á Object
            const productObj = {
                id: parseInt(id),
                category: category,
                name: name,
                desc: desc,
                price: parseInt(price),
                originalPrice: originalPrice ? parseInt(originalPrice) : undefined,
                badge: badge || undefined,
                stock: stock,
                img: img || "https://lh3.googleusercontent.com/d/19ro_rUeZkoPNdHJhgccYUDkfhC7G2E8U", // Default Img
                options: options.length > 0 ? options : undefined
            };

            // 4. ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô undefined ‡∏≠‡∏≠‡∏Å
            Object.keys(productObj).forEach(key => productObj[key] === undefined && delete productObj[key]);

            // 5. ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô String ‡πÅ‡∏ö‡∏ö‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° (Format ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
            // ‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ Regex ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ " ‡∏ó‡∏µ‡πà Key (‡πÄ‡∏ä‡πà‡∏ô "id": 1 => id: 1)
            let jsonString = JSON.stringify(productObj, null, 4);
            let formattedString = jsonString.replace(/"(\w+)":/g, '$1:').replace(/\n/g, ' '); // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î Format ‡∏ï‡∏≤‡∏°‡∏ä‡∏≠‡∏ö
            
            // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö
            formattedString = `{ ${formattedString.replace(/[{}]/g, '').trim()} },`;

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            document.getElementById('output_code').value = formattedString;
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Preview
            updatePreview(productObj);
        }

        function updatePreview(obj) {
            document.getElementById('prev_name').innerText = obj.name;
            document.getElementById('prev_desc').innerText = obj.desc;
            document.getElementById('prev_price').innerText = `‡∏ø${obj.price}`;
            document.getElementById('prev_img').src = obj.img;
            
            const badgeEl = document.getElementById('prev_badge');
            if(obj.badge) {
                badgeEl.innerText = obj.badge;
                badgeEl.classList.remove('hidden');
            } else {
                badgeEl.classList.add('hidden');
            }

            const origEl = document.getElementById('prev_origPrice');
            if(obj.originalPrice) {
                origEl.innerText = `‡∏ø${obj.originalPrice}`;
                origEl.classList.remove('hidden');
            } else {
                origEl.classList.add('hidden');
            }
        }

        function copyCode() {
            const copyText = document.getElementById("output_code");
            copyText.select();
            document.execCommand("copy");
            alert("‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
        }
    </script>
</body>
</html>
